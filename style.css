@font-face {
    font-family: 'JetBrains Mono NL';
    src: url('JetBrainsMono-2.304/fonts/ttf/JetBrainsMonoNL-Regular.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: 'Helvetica Now Variable';
    src: url('HelveticaNowVariable.ttf') format('truetype');
    font-weight: 100 900; /* Variable font weight range */
    font-style: normal;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    width: 100vw;
    height: 100vh;
    background-color: #F7F7F7;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    overflow: hidden; /* Prevent page scrolling */
}

.column-container {
    position: absolute;
    width: 85px; /* Wider to accommodate expansion (50px default + 35px expansion) */
    height: 100vh;
    z-index: 10; /* Higher z-index to ensure items are above other elements */
    overflow-y: scroll;
    overflow-x: hidden; /* Hide horizontal scrollbar */
    scrollbar-width: none; /* Hide scrollbar for Firefox */
    -ms-overflow-style: none; /* Hide scrollbar for IE and Edge */
    cursor: grab;
    scroll-snap-type: y mandatory;
    pointer-events: auto; /* Ensure container can receive pointer events */
}

/* Create scrollable height for absolutely positioned children */
.column-container::after {
    content: '';
    display: block;
    height: calc(100vh / 6 * 18); /* Total height for 18 items (3 copies × 6 colors) */
    width: 1px;
}

.column-container::-webkit-scrollbar {
    display: none; /* Hide scrollbar for Chrome, Safari, Opera */
}


.color-item {
    position: absolute;
    width: 50px;
    height: calc(100vh / 6);
    flex-shrink: 0;
    scroll-snap-align: start;
    scroll-snap-stop: always;
    transition: width 0.2s ease, z-index 0.2s ease;
    pointer-events: auto; /* Ensure items can receive hover events */
    z-index: 11; /* Higher z-index to ensure items are above container */
    box-sizing: border-box; /* Ensure width includes padding/border */
    will-change: width; /* Optimize for width transitions */
}

/* Position items vertically using nth-child */
.color-item:nth-child(1) { top: 0; }
.color-item:nth-child(2) { top: calc(100vh / 6 * 1); }
.color-item:nth-child(3) { top: calc(100vh / 6 * 2); }
.color-item:nth-child(4) { top: calc(100vh / 6 * 3); }
.color-item:nth-child(5) { top: calc(100vh / 6 * 4); }
.color-item:nth-child(6) { top: calc(100vh / 6 * 5); }
.color-item:nth-child(7) { top: calc(100vh / 6 * 6); }
.color-item:nth-child(8) { top: calc(100vh / 6 * 7); }
.color-item:nth-child(9) { top: calc(100vh / 6 * 8); }
.color-item:nth-child(10) { top: calc(100vh / 6 * 9); }
.color-item:nth-child(11) { top: calc(100vh / 6 * 10); }
.color-item:nth-child(12) { top: calc(100vh / 6 * 11); }
.color-item:nth-child(13) { top: calc(100vh / 6 * 12); }
.color-item:nth-child(14) { top: calc(100vh / 6 * 13); }
.color-item:nth-child(15) { top: calc(100vh / 6 * 14); }
.color-item:nth-child(16) { top: calc(100vh / 6 * 15); }
.color-item:nth-child(17) { top: calc(100vh / 6 * 16); }
.color-item:nth-child(18) { top: calc(100vh / 6 * 17); }

/* Left column items: anchored to left edge (left: 0), expand right on hover */
.left-column {
    left: 0;
}

.left-column .color-item {
    left: 0;
}

/* Right column items: anchored to right edge (right: 0), expand left on hover */
.right-column {
    right: 0;
}

.right-column .color-item {
    right: 0;
}

/* Legend expansion: all rectangles expand to normal hover width (85px) */
/* This creates a bulk-hover effect where all items expand together */
.color-item.legend-expanded {
    width: 85px !important; /* Same width as normal hover state */
    z-index: 13; /* Above canvas-text-box (z-index: 12) to ensure expanded rectangle is visible */
}

/* Label wrapper: stable anchor positioned exactly 10px from inner edge */
.color-item .label-wrapper {
    position: absolute;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    z-index: 12;
    pointer-events: none;
}

/* Left column: wrapper positioned 10px from right edge (inner edge) and 10px from top */
.left-column .color-item .label-wrapper {
    right: 10px;
    top: 10px;
}

/* Right column: wrapper positioned 10px from left edge (inner edge) and 10px from bottom */
.right-column .color-item .label-wrapper {
    left: 10px;
    bottom: 10px;
}

/* Label styling - hidden by default */
.color-item .label {
    position: relative;
    color: white;
    font-weight: bold;
    text-transform: none;
    font-family: 'JetBrains Mono NL', monospace;
    font-size: 15px;
    white-space: nowrap;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s ease;
    letter-spacing: 0.03em;
    /* Ensure no spacing affects bounding box calculation */
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    /* Use writing-mode for stable vertical text (no rotation needed) */
    writing-mode: vertical-rl;
    text-orientation: mixed;
}

/* Left column: text aligned to right within wrapper */
.left-column .color-item .label {
    text-align: right;
    transform: rotate(180deg); /* Rotate 180 degrees to read bottom to top */
}

/* Right column: text aligned to left within wrapper */
.right-column .color-item .label {
    text-align: left;
}

/* Show label when item is expanded (hover state) */
.color-item:hover .label,
.color-item.opposite-hovered .label {
    opacity: 1;
}

/* Show all labels when legend is expanded (for all items in both columns) */
.color-item.legend-expanded .label {
    opacity: 1;
}

/* Label wrapper positioning remains the same for legend-expanded items */
/* Left column items use right: 10px, top: 10px (already defined) */
/* Right column items use left: 10px, bottom: 10px (already defined) */

/* Hide label during scrolling */
.column-container.scrolling .color-item .label {
    opacity: 0;
}

/* Hover expansion: width grows from 50px to 85px inward */
/* Only allow hover expansion when NOT scrolling */
.color-item:hover,
.color-item.opposite-hovered {
    width: 85px;
    z-index: 13; /* Above canvas-text-box (z-index: 12) to ensure expanded rectangle is visible */
}

/* Legend expansion is now handled by .color-item.legend-expanded rule above */
/* All items (both columns) expand to 85px when legend is active */

/* Disable hover expansion during scrolling */
/* Higher specificity to override hover state */
.column-container.scrolling .color-item {
    width: 50px;
    z-index: 11; /* Reset to default z-index when scrolling */
}

.column-container.scrolling .color-item:hover,
.column-container.scrolling .color-item.opposite-hovered,
.column-container.scrolling .color-item.legend-expanded {
    width: 50px;
    z-index: 11; /* Reset to default z-index when scrolling */
}

.line {
    position: absolute;
    width: 1px;
    height: 100vh;
    background-color: #2C2C2C;
    top: 0;
    z-index: 1;
    pointer-events: none; /* Allow clicks to pass through to columns */
    display: none; /* Hide grid lines */
}


.line-outer-left {
    left: 100px;
}

.line-inner-left {
    left: 150px;
}

.line-inner-right {
    right: 150px;
}

.line-outer-right {
    right: 100px;
}

/* Main gradient header - persistent header on main screen (post-intro) */
.main-gradient-header {
    position: absolute;
    top: 0;
    height: calc(100vh / 6); /* Same height as one color item row */
    /* left and width are set dynamically via JavaScript to span from scrollbar inner edges */
    z-index: 1; /* Below UI layer (2) so UI elements render on top, but above background (0) */
    pointer-events: none; /* Don't block interactions */
    /* Hidden by default, shown when horizontal expansion starts (while intro gradients collapse) */
    display: none;
    visibility: hidden;
    opacity: 0;
    transition: opacity 0.3s ease;
}

/* Main gradient header visible state */
.main-gradient-header.visible {
    display: block;
    visibility: visible;
    opacity: 1;
}

/* Intro layer wrapper - contains gradient intro container */
.intro-layer {
    position: absolute;
    left: 0;
    right: 0;
    top: 0;
    height: 100vh;
    z-index: 5; /* Above UI layer (2) but below columns (10) */
    pointer-events: none; /* Let pointer events pass through to child */
}

/* Gradient intro container - holds all gradient rectangles */
.gradient-intro-container {
    position: absolute;
    left: 0;
    right: 0;
    top: 0;
    height: 100vh;
    z-index: 1; /* Relative to intro-layer */
    pointer-events: auto; /* Enable wheel events for center scroll trigger */
    overflow: hidden; /* Clip gradients to viewport - prevents bleed during collapse */
    outline: none !important; /* Remove any focus outlines */
    border: none !important; /* Remove any borders */
    box-shadow: none !important; /* Remove any box shadows */
}

/* Intro phase classes */
.gradient-intro-container.intro-entering {
    /* Entry phase - full-bleed bands animating to centered layout */
}

.gradient-intro-container.intro-active {
    /* Default active state */
}

.gradient-intro-container.intro-closing {
    /* Closing phase - horizontal expansion in progress */
}

.gradient-intro-container.intro-collapsed {
    /* Final collapsed state */
}

/* Individual gradient rectangle */
.gradient-intro-rectangle {
    position: absolute;
    height: calc(100vh / 6); /* Same height as color items */
    /* Position and width will be set dynamically via JavaScript */
    pointer-events: none; /* Ensure no interaction */
    /* Entry animation: 2000ms with very soft, gradual easing for left/width, fast height transition for smooth scrubbing (50ms) */
    transition: left 2000ms cubic-bezier(0.2, 0.0, 0.0, 1), width 2000ms cubic-bezier(0.2, 0.0, 0.0, 1), height 50ms ease;
    outline: none !important; /* Remove any focus outlines */
    border: none !important; /* Remove any borders */
    box-shadow: none !important; /* Remove any box shadows */
}

/* Closing phase: faster transition for horizontal expansion */
.gradient-intro-container.intro-closing .gradient-intro-rectangle {
    /* Faster transition for closing phase (250ms) - quick expansion that reaches 70-80% very early */
    /* cubic-bezier(0.4, 0.0, 0.2, 1) accelerates quickly at start, reaching most progress early */
    transition: left 250ms cubic-bezier(0.4, 0.0, 0.2, 1), width 250ms cubic-bezier(0.4, 0.0, 0.2, 1), height 50ms ease;
}

/* Vertical collapse phase - bars shrink to 0 height */
.gradient-intro-container.collapse .gradient-intro-rectangle {
    height: 0px !important;
}

/* Hide text when intro is closing or collapsed (but allow fade-in during entering phase) */
.gradient-intro-container.intro-closing .gradient-intro-text,
.gradient-intro-container.intro-collapsed .gradient-intro-text {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    pointer-events: none !important;
}

/* Hide arrow when intro is entering, closing, or collapsed */
.gradient-intro-container.intro-entering .gradient-intro-arrow,
.gradient-intro-container.intro-closing .gradient-intro-arrow,
.gradient-intro-container.intro-collapsed .gradient-intro-arrow {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    pointer-events: none !important;
}

/* Instructional text for gradient intro */
.gradient-intro-text {
    position: absolute;
    color: white;
    font-family: 'JetBrains Mono NL', monospace;
    font-size: 15px;
    font-weight: normal;
    text-transform: none; /* Allow lowercase like [i] */
    letter-spacing: 0.03em; /* 3% letter spacing - same as [i] */
    text-align: center;
    white-space: normal;
    pointer-events: none; /* Don't block interactions */
    z-index: 2; /* Above gradient rectangles */
    line-height: 1.4; /* Comfortable line spacing for multi-line text */
    /* Position will be set dynamically via JavaScript */
    /* Start hidden by default - will fade in during entry animation */
    opacity: 0;
    transform: translateY(10px); /* Start slightly below for smooth slide-up effect */
    /* Opacity transition synced with gradient shrink animation (2000ms with same easing) */
    /* Transform transition for smooth slide-up animation after demo */
    transition: left 2s cubic-bezier(0.2, 0.0, 0.0, 1), width 2s cubic-bezier(0.2, 0.0, 0.0, 1), opacity 2s cubic-bezier(0.2, 0.0, 0.0, 1), transform 1.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* Hide text during entering phase (opacity 0) - will fade in as gradients shrink */
.gradient-intro-container.intro-entering .gradient-intro-text {
    opacity: 0 !important;
}

/* Show text when active phase is reached (opacity 1) - synced with gradient shrink completion */
.gradient-intro-container.intro-active .gradient-intro-text {
    opacity: 1 !important;
    transform: translateY(0); /* Slide up to final position with smooth easing */
}

/* Hide text during demo - must override intro-active opacity */
/* More specific selector ensures it wins when both intro-active and demo-active are present */
.gradient-intro-container.intro-active.demo-active .gradient-intro-text,
.gradient-intro-container.demo-active .gradient-intro-text {
    opacity: 0 !important;
    visibility: hidden !important;
    display: none !important;
}

/* START text is no longer clickable - center scroll trigger is used instead */

/* Downward arrow below START text */
.gradient-intro-arrow {
    display: none !important; /* Hide arrow */
    position: absolute;
    color: white;
    font-family: sans-serif;
    font-size: 16px;
    font-weight: bold; /* Bold weight to match [start] text thickness */
    text-align: center;
    pointer-events: none; /* Don't block interactions */
    z-index: 2; /* Above gradient rectangles */
    opacity: 0.7; /* Subtle appearance */
    /* Position will be set dynamically via JavaScript */
    transition: left 2s cubic-bezier(0.2, 0.0, 0.0, 1), width 2s cubic-bezier(0.2, 0.0, 0.0, 1), opacity 0.3s ease; /* Deliberate entry animation (2000ms with very soft, gradual easing) */
    /* Subtle bounce animation */
    animation: arrowBounce 2s ease-in-out infinite;
}

/* Closing phase: faster transition for arrow */
.gradient-intro-container.intro-closing .gradient-intro-arrow {
    transition: left 0.4s ease, width 0.4s ease, opacity 0.3s ease; /* Faster transition for closing phase (400ms) */
}

/* Keyframe animation for gentle bounce effect */
@keyframes arrowBounce {
    0%, 100% {
        transform: translateY(0);
        opacity: 0.7;
    }
    50% {
        transform: translateY(8px);
        opacity: 0.5;
    }
}


/* UI layer wrapper - contains all UI elements (logo, panel, colorkey) */
.ui-layer {
    position: absolute;
    left: 0;
    right: 0;
    top: 0;
    height: 100vh;
    z-index: 2; /* Below intro layer (5) but above background (0) */
    pointer-events: none; /* Let pointer events pass through when hidden - children can override */
    /* Visibility controlled by JavaScript based on intro phase */
    opacity: 0;
    transition: opacity 0.3s ease; /* Smooth fade in when becoming visible */
}

/* UI layer visible state - applied when gradients have fully expanded to scrollbar edges (hasExpandedToScrollbars) or intro is completed */
.ui-layer.ui-visible {
    opacity: 1;
    /* Keep pointer-events: none on parent, but children have pointer-events: auto to enable interactions */
}

.black-corner-rectangle {
    position: absolute;
    right: 50px; /* 50px from right edge - aligns with left edge of right scrollbar */
    /* top position is set dynamically via JavaScript to align with ESTHESIA center */
    width: 225px; /* Increased from 205px by 20px to expand leftward */
    height: 40px; /* Increased from 35px by 5px - top edge only */
    background-color: #2C2C2C; /* Same black as .black-rectangle */
    z-index: 1; /* Relative to ui-layer */
    pointer-events: auto; /* Enable hover interactions */
    box-sizing: border-box; /* Ensure width includes padding/border */
    margin: 0; /* Remove any default margins */
    padding: 0; /* Remove any default padding */
    transition: width 0.2s ease, left 0.2s ease, right 0.2s ease, top 0.1s ease; /* Smooth transitions - all match column expansion timing (0.2s) */
    cursor: pointer; /* Indicate interactivity */
    display: flex;
    align-items: center; /* Vertically centers text within rectangle */
    justify-content: flex-start; /* Align text to left */
    overflow: hidden; /* Ensure text stays within bounds */
}

/* Text styling for COLOR KEY */
.black-corner-rectangle .color-key-text {
    color: white; /* Match white canvas color */
    font-family: Helvetica, sans-serif;
    font-size: 0; /* Remove spacing between inline-block children */
    font-weight: bold;
    letter-spacing: -0.05em; /* -5% letter spacing */
    white-space: nowrap;
    text-transform: uppercase;
    padding: 0 10px 0 0; /* Right padding only, no left padding - flush against left edge */
    box-sizing: border-box;
    position: relative;
    top: 9px; /* Moved up 3px from 12px */
    left: -1px; /* Move 1px to the left (moved 2px right from -3px) */
    display: flex;
    justify-content: flex-start; /* Align text to left */
}

/* Default letter-spacing for each letter - -15% spacing */
.black-corner-rectangle .color-key-text .letter-s,
.black-corner-rectangle .color-key-text .letter-i,
.black-corner-rectangle .color-key-text .letter-g,
.black-corner-rectangle .color-key-text .letter-n,
.black-corner-rectangle .color-key-text .letter-a,
.black-corner-rectangle .color-key-text .letter-l {
    display: inline-block; /* Allow individual letter control */
    font-size: 34px; /* Reset font-size from parent's 0 */
    letter-spacing: -0.05em; /* -5% letter spacing */
    transition: letter-spacing 0.3s ease, margin-right 0.3s ease; /* Smooth transition */
}

/* Expanded letter-spacing on hover - progressive spacing (same logic as PANEL) */
.black-corner-rectangle:hover .color-key-text .letter-s,
.black-corner-rectangle.color-key-expanded .color-key-text .letter-s {
    letter-spacing: 0.16em; /* 16% - between S and I (same as P→A in PANEL) */
}

.black-corner-rectangle:hover .color-key-text .letter-i,
.black-corner-rectangle.color-key-expanded .color-key-text .letter-i {
    letter-spacing: 0.24em; /* 24% - between I and G */
}

.black-corner-rectangle:hover .color-key-text .letter-g,
.black-corner-rectangle.color-key-expanded .color-key-text .letter-g {
    letter-spacing: 0.32em; /* 32% - between G and N */
}

.black-corner-rectangle:hover .color-key-text .letter-n,
.black-corner-rectangle.color-key-expanded .color-key-text .letter-n {
    letter-spacing: 0.4em; /* 40% - between N and A */
}

.black-corner-rectangle:hover .color-key-text .letter-a,
.black-corner-rectangle.color-key-expanded .color-key-text .letter-a {
    letter-spacing: 0.48em; /* 48% - between A and L */
}

.black-corner-rectangle:hover .color-key-text .letter-l,
.black-corner-rectangle.color-key-expanded .color-key-text .letter-l {
    letter-spacing: 0.56em; /* 56% - after L (last letter) */
}

/* Rectangle width stays static on hover - only letter-spacing changes */

.black-bottom-rectangle {
    position: absolute;
    left: 285px; /* Right edge of .black-rectangle (50px + 235px) */
    /* top position is set dynamically via JavaScript to align with ESTHESIA center */
    width: 365px; /* Keep original width - this is the parameter text-box (long rectangle) */
    height: 40px; /* Increased from 35px by 5px - top edge only */
    background-color: #2C2C2C; /* Same black as other rectangles */
    z-index: 1; /* Relative to ui-layer */
    pointer-events: auto; /* Enable hover interactions */
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    transition: top 0.1s ease; /* Smooth transitions - removed width transition */
    cursor: default; /* Changed from pointer to default - no hover indication */
    display: flex;
    align-items: center; /* Vertically centers text within rectangle */
    justify-content: flex-start; /* Align text to left edge */
    overflow: hidden; /* Ensure text stays within bounds */
}

/* Rectangle width stays static on hover - only letter-spacing changes */

.black-middle-rectangle {
    position: absolute;
    right: 50px; /* 50px from right edge - aligns with left edge of right scrollbar */
    bottom: 0; /* Positioned at bottom of screen */
    width: 225px; /* Keep original width - this is the panel rectangle (short rectangle) */
    height: 40px; /* Increased from 35px by 5px - top edge only */
    background-color: #2C2C2C; /* Same black as other rectangles */
    z-index: 1; /* Relative to ui-layer */
    pointer-events: auto; /* Enable hover interactions */
    box-sizing: border-box; /* Ensure width includes padding/border */
    margin: 0; /* Remove any default margins */
    padding: 0; /* Remove any default padding */
    transition: width 0.3s ease, left 0.2s ease, right 0.2s ease; /* Smooth transitions */
    cursor: pointer; /* Indicate interactivity */
    display: flex;
    align-items: center; /* Vertically centers text within rectangle */
    justify-content: flex-start; /* Align text to left edge */
    overflow: hidden; /* Ensure text stays within bounds */
}

/* Rectangle width stays static on hover - only letter-spacing changes */

.black-rectangle {
    position: absolute;
    left: 50px;
    top: calc(100vh / 6 - 75px); /* Positioned so bottom edge stays at calc(100vh / 6) */
    width: 235px;
    height: 75px; /* Reduced height, bottom edge stays fixed */
    background-color: #2C2C2C;
    z-index: 1; /* Relative to ui-layer */
    pointer-events: auto; /* Enable hover interactions for SYN letter-spacing effect */
    cursor: pointer; /* Indicate interactivity */
    padding-left: 0; /* No left padding - text sits flush with left edge */
    padding-bottom: 0; /* No bottom padding - text sits on bottom edge */
    font-family: sans-serif;
    font-size: 28px;
    font-weight: bold;
    color: white; /* Match white canvas color */
    letter-spacing: 2px;
    line-height: 114%;
    overflow: visible; /* Allow SYN text to extend beyond container on hover */
}

.black-rectangle .syn-text {
    position: absolute;
    bottom: -6px; /* Negative offset to make glyphs touch bottom edge */
    left: 0; /* Flush with left edge of black rectangle */
    font-family: Helvetica, sans-serif;
    font-size: 88px;
    letter-spacing: -0.17em; /* -17% letter spacing */
    color: white; /* Match white canvas color */
    text-transform: uppercase;
    line-height: 0.8; /* Tight line-height to make glyphs touch bottom edge */
    margin: 0;
    padding: 0;
    transform: translateX(-4px); /* Pull text left to eliminate gap from font sidebearings */
    white-space: nowrap; /* Prevent line breaking when letters expand */
    overflow: visible; /* Allow text to extend beyond container */
}

.black-rectangle .syn-text .syn-word {
    display: inline-block;
    position: relative;
    white-space: nowrap; /* Prevent line breaking when letters expand */
}

/* Default letter-spacing for each SYN letter */
.black-rectangle .syn-text .syn-letter-s,
.black-rectangle .syn-text .syn-letter-y,
.black-rectangle .syn-text .syn-letter-n {
    display: inline-block; /* Allow individual letter control */
    letter-spacing: -0.17em; /* -17% letter spacing - matches original */
    transition: letter-spacing 0.3s ease; /* Smooth transition */
}

/* Specific S letter spacing - 3px tighter than default */
.black-rectangle .syn-text .syn-letter-s {
    letter-spacing: -0.204em; /* -0.17em - 0.034em (3px at 88px font) */
}

/* Expanded letter-spacing on hover - progressive spacing (same logic as PANEL) */
.black-rectangle:hover .syn-text .syn-letter-s {
    letter-spacing: 0.068em; /* ~6px at 88px font - reduced by 2px */
}

.black-rectangle:hover .syn-text .syn-letter-y {
    letter-spacing: 0.205em; /* ~18px at 88px font - reduced by 3px from 0.24em */
}

.black-rectangle:hover .syn-text .syn-letter-n {
    letter-spacing: -0.17em; /* Keep same as default - maintains consistent gap to [i] */
}

.black-rectangle .syn-text .ethesia-text {
    position: relative; /* Changed from absolute to flow with SYN letters */
    display: inline-block;
    vertical-align: top; /* Align to top of SYN */
    margin-left: 15px; /* 15px gap from SYN */
    margin-top: 3px; /* Same 3px offset from top as before */
    font-family: 'JetBrains Mono NL', monospace;
    font-size: 15px;
    letter-spacing: 0.03em; /* 3% letter spacing */
    color: white;
    white-space: nowrap;
    text-transform: none; /* Override parent's uppercase transform to keep lowercase */
    line-height: 0.8; /* Match SYN's line-height */
    margin-right: 0;
    margin-bottom: 0;
    padding: 0;
}



.split-region {
    position: absolute;
    top: 50px; /* Start below the gradient area */
    height: calc(100vh - 50px); /* Fill remaining viewport height */
    z-index: 0;
    pointer-events: none; /* Allow clicks to pass through */
}

.split-region-white {
    left: 50px;
    right: 50px;
    width: auto;
    background-color: white;
    overflow: hidden; /* Clip content to region boundaries */
    display: flex;
    flex-direction: column;
}

/* Text styling for PANEL - same as COLOR KEY */
.black-middle-rectangle .panel-text {
    color: white; /* Match white canvas color */
    font-family: Helvetica, sans-serif;
    font-size: 0; /* Remove spacing between inline-block children */
    font-weight: bold;
    letter-spacing: -0.05em; /* -5% letter spacing */
    white-space: nowrap;
    text-transform: uppercase;
    padding: 0 10px 0 0; /* Right padding only, no left padding - flush against left edge */
    box-sizing: border-box;
    position: relative;
    top: 9px; /* Moved up 3px from 12px */
    left: -3px; /* Moved 3px to the left */
}

/* Default letter-spacing for each letter - -15% spacing */
.black-middle-rectangle .panel-text .panel-letter-p,
.black-middle-rectangle .panel-text .panel-letter-a,
.black-middle-rectangle .panel-text .panel-letter-n,
.black-middle-rectangle .panel-text .panel-letter-e,
.black-middle-rectangle .panel-text .panel-letter-l {
    display: inline-block; /* Allow individual letter control */
    font-size: 34px; /* Reset font-size from parent's 0 */
    letter-spacing: -0.05em; /* -5% letter spacing */
    transition: letter-spacing 0.3s ease, margin-right 0.3s ease; /* Smooth transition */
}

/* Expanded letter-spacing for pages with internal panels - progressive spacing */
/* Applied via .panel-expanded class (not hover) for Shape & Number and Shape & Sound pages */
.black-middle-rectangle.panel-expanded .panel-text .panel-letter-p {
    letter-spacing: 0.16em; /* 16% - between P and A */
}

.black-middle-rectangle.panel-expanded .panel-text .panel-letter-a {
    letter-spacing: 0.24em; /* 24% - between A and N */
}

.black-middle-rectangle.panel-expanded .panel-text .panel-letter-n {
    letter-spacing: 0.32em; /* 32% - between N and E */
}

.black-middle-rectangle.panel-expanded .panel-text .panel-letter-e {
    letter-spacing: 0.4em; /* 40% - between E and L */
}

.black-middle-rectangle.panel-expanded .panel-text .panel-letter-l {
    letter-spacing: 0.48em; /* 48% - after L */
}

/* Text styling for WORD - same as PANEL */
.black-bottom-rectangle .word-text {
    color: white; /* Match white canvas color */
    font-family: Helvetica, sans-serif;
    font-size: 0; /* Remove spacing between inline-block children */
    font-weight: bold;
    letter-spacing: -0.05em; /* -5% letter spacing */
    white-space: nowrap;
    text-transform: uppercase;
    text-align: left; /* Explicitly align text to left */
    padding: 0 10px 0 0; /* Right padding only, no left padding - flush against left edge */
    margin: 0; /* Remove any default margins */
    box-sizing: border-box;
    position: relative;
    top: 9px; /* Moved up 3px from 12px */
    left: -2px; /* Moved 2px to the left */
    display: flex;
    justify-content: flex-start; /* Align text to left */
}

/* Default letter-spacing for each letter - -15% spacing */
.black-bottom-rectangle .word-text .word-letter {
    display: inline-block; /* Allow individual letter control */
    font-size: 34px; /* Reset font-size from parent's 0 */
    letter-spacing: -0.05em; /* -5% letter spacing */
    /* Removed transition - no hover effects on text */
}

/* Extra spacing for spaces around "&" symbol - visible despite negative letter-spacing */
.black-bottom-rectangle .word-text .word-space-around-ampersand {
    margin-right: 0.25em; /* Add visible spacing despite negative letter-spacing */
}

/* Info marker [i] next to panel text */
.black-middle-rectangle .panel-text .parameter-info-marker {
    position: absolute;
    left: 100%; /* Start at end of text content */
    margin-left: -3px; /* Move 3px to the left (was -5px, moved 2px right) */
    top: 0; /* Aligned to top edge */
    font-family: 'JetBrains Mono NL', monospace;
    font-size: 15px;
    color: white; /* Match white canvas color */
    white-space: nowrap;
    text-transform: none; /* Override parent's uppercase transform to keep lowercase */
    pointer-events: none; /* Don't interfere with interactions */
    margin-top: 0;
    margin-right: 0;
    margin-bottom: 0;
    padding: 0;
    display: inline-block; /* Ensure proper positioning */
    transition: transform 0.3s ease; /* Smooth transition to match letter spacing */
}

/* When panel is expanded, move [i] left to stick to the L letter (L has letter-spacing: 0.48em) */
.black-middle-rectangle.panel-expanded .panel-text .parameter-info-marker {
    /* Move left by L's letter-spacing (0.48em) to stick to L */
    /* font-size is 34px, so 0.48em = 0.48 * 34px = 16.32px */
    transform: translateX(calc(-0.48em - 3px)); /* Move left by L's letter-spacing plus original offset */
}


.text-box {
    width: 100%;
    padding: 40px;
    box-sizing: border-box;
    font-family: sans-serif;
    font-size: 16px;
    line-height: 1.6;
    color: #2C2C2C;
    transition: opacity 0.3s ease, visibility 0.3s ease;
    flex-shrink: 0;
    position: relative; /* Enable absolute positioning for line backgrounds */
}

.text-box p {
    margin-bottom: 20px;
    position: relative; /* Enable absolute positioning for line backgrounds */
}

.text-box p:last-child {
    margin-bottom: 0;
}

/* Line background rectangles */
.text-box .line-bg {
    position: absolute;
    background-color: #E0E0E0; /* Light gray background */
    border-radius: 4px; /* Slight rounded corners for pill effect */
    z-index: -1; /* Behind the text */
    pointer-events: none; /* Don't interfere with text selection */
}


#p5-container {
    width: 100%;
    height: 100%;
    position: relative;
    /* No transition - instant page switching */
    /* Ensure container maintains size even when hidden */
    min-width: 1px;
    min-height: 1px;
    /* Fill entire canvas container */
    /* Ensure canvas is on top */
    z-index: 10;
}

#p5-container canvas {
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    display: block !important;
    z-index: 11 !important;
}

/* Canvas cover: hides canvas content during intro phase */
/* Positioned exactly over canvas container to hide content until intro completes */
.canvas-cover {
    position: absolute;
    top: calc(100vh / 6); /* Starts directly below gradient header */
    left: 50px; /* Inner edge of left scrollbar */
    right: 50px; /* Inner edge of right scrollbar */
    height: calc(100vh - 100vh / 6); /* Fills remaining viewport height below gradient */
    background-color: #F7F7F7; /* Match page background color */
    z-index: 3; /* Above canvas (1) but below intro layer (5) and columns (10) */
    pointer-events: none; /* Don't block interactions - just visual cover */
    transition: opacity 0.3s ease, visibility 0.3s ease;
    /* Visible by default during intro */
    opacity: 1;
    visibility: visible;
}

/* Hide canvas cover when intro is completed */
.canvas-cover.hidden {
    opacity: 0;
    visibility: hidden;
}

/* UI mask: white background layer that masks UI elements during transition state */
/* Covers entire viewport to hide UI elements in gaps between scrollbars and gradients */
.ui-mask {
    position: fixed; /* Fixed positioning to cover entire viewport including gaps */
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100vw;
    height: 100vh;
    background-color: #F7F7F7; /* Match page background color */
    z-index: 4; /* Above UI layer (2) and canvas cover (3), but below intro layer (5) and canvas (10+) */
    pointer-events: none; /* Don't block interactions - just visual mask */
    transition: opacity 0.3s ease, visibility 0.3s ease;
    /* Hidden by default - only visible during transition state */
    opacity: 0;
    visibility: hidden;
}

/* Show UI mask during transition state (when scrollbars detach with gap) */
.ui-mask.visible {
    opacity: 1;
    visibility: visible;
}

/* Canvas container: main white interaction area below gradient header and between scrollbars */
/* This defines the exact bounds where all interaction content (p5 canvas, UI panel) should be positioned */
.canvas-container {
    position: absolute;
    top: calc(100vh / 6); /* Starts directly below gradient header */
    left: 50px; /* Inner edge of left scrollbar */
    right: 50px; /* Inner edge of right scrollbar */
    height: calc(100vh - 100vh / 6); /* Fills remaining viewport height below gradient */
    z-index: 1; /* Above background but below UI layer */
    /* Allow pointer events for interaction content inside */
    pointer-events: auto;
}

/* Canvas text box: reusable text component with fixed position and style */
.canvas-text-box {
    position: fixed; /* Fixed to viewport for consistent positioning across canvases */
    left: 50px; /* 50px from left edge of outer screen boundary (viewport) */
    top: calc(100vh / 6 * 5 + 3px); /* Start at the top of the bottommost visible rectangle (6th rectangle, index 5) */
    width: 1035px;
    height: calc(100vh / 6); /* Spread across the full height of the rectangle */
    font-family: Helvetica, sans-serif;
    font-size: 29px;
    line-height: 29px;
    font-weight: bold;
    color: #2C2C2C; /* Same black as UI rectangles */
    z-index: 12; /* Above canvas but below UI layer elements */
    pointer-events: none; /* Don't interfere with canvas interactions */
    overflow: visible; /* Ensure text is visible */
}

/* White backing layer: blocks main text box when PANEL is hovered */
.canvas-text-box-panel-backing {
    position: fixed; /* Fixed to viewport - matches PANEL overlay positioning */
    left: 50px; /* Same as PANEL overlay */
    top: calc(100vh / 6 * 5 + 3px); /* Same as PANEL overlay */
    width: 1035px; /* Same width as main text box */
    height: calc(100vh / 6); /* Same height as PANEL overlay */
    background-color: white; /* White background to block main text box */
    z-index: 12; /* Above main text box (12) but below PANEL text overlay (13) */
    pointer-events: none; /* Don't interfere with canvas interactions */
    /* Hidden by default */
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
}

/* Show backing layer when PANEL element is hovered (via class toggle) */
.canvas-text-box-panel-backing.visible {
    opacity: 1;
    visibility: visible;
}

/* PANEL hover overlay: appears above main canvas text box on hover */
.canvas-text-box-panel-overlay {
    position: fixed; /* Fixed to viewport - matches canvas-text-box positioning */
    left: 50px; /* Same as canvas-text-box */
    top: calc(100vh / 6 * 5 + 3px); /* Same as canvas-text-box */
    width: 1035px; /* Same width as main text box */
    height: calc(100vh / 6); /* Same as canvas-text-box */
    font-family: Helvetica, sans-serif; /* Same font */
    font-size: 29px; /* Same font size */
    line-height: 29px; /* Same line height */
    font-weight: bold; /* Same font weight */
    color: #E0E0E0; /* Same gray as used elsewhere on the site */
    z-index: 13; /* Higher than backing layer (12) and canvas-text-box (12) to appear above both */
    pointer-events: none; /* Don't interfere with canvas interactions */
    overflow: visible; /* Ensure text is visible */
    /* Hidden by default */
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
}

/* Show overlay when PANEL element is hovered (via class toggle) */
.canvas-text-box-panel-overlay.visible {
    opacity: 1;
    visibility: visible;
}

/* Line background blocks for canvas text box */
.canvas-line-bg {
    border-radius: 0; /* No rounded corners for stepped shape */
}

/* Canvas text box for SHAPE & LETTER only */
.canvas-text-box-letter-sound {
    position: absolute;
    /* 85px from the start of the canvas (85px below the bottom edge of gradient header) */
    top: 85px;
    /* 85px inward from the inner edge of left scrollbar (which is at 50px) */
    left: 85px;
    /* 85px inward from the inner edge of right scrollbar (which is at 50px from right) */
    right: 85px;
    /* Width is calculated automatically via left and right */
    font-family: Helvetica, sans-serif;
    font-size: 67px;
    line-height: 71px;
    font-weight: bold;
    color: #2C2C2C; /* Same black as UI rectangles */
    z-index: 11; /* Below main canvas text box (z-index: 12) but above canvas */
    pointer-events: auto; /* Enable hover interactions on letters */
    overflow: visible; /* Ensure text is visible */
    text-align: left; /* Left-aligned text */
    text-transform: uppercase; /* Convert text to uppercase */
    /* Ensure no padding or margin that would offset text from left edge */
    padding: 0;
    margin: 0;
    /* Hidden by default, shown only for SHAPE & LETTER pages */
    display: none;
    visibility: hidden;
    opacity: 0;
    /* No transition - instant page switching */
    /* Ensure proper word wrapping - no word splitting */
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: none; /* No automatic hyphenation */
}

/* Show text box when LETTER & SOUND is active */
.canvas-text-box-letter-sound.visible {
    display: block;
    visibility: visible;
    opacity: 1;
}

/* Paragraph styling for letter-sound text box */
.canvas-text-box-letter-sound p {
    display: block;
    width: 100%;
    margin: 0;
    padding: 0;
    text-align: left; /* Left-aligned text */
    /* Normal font size and line height for proper text flow */
    font-size: 67px; /* Match container font-size */
    line-height: 71px; /* Match container line-height */
    /* Ensure proper word wrapping - no word splitting */
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: none; /* No automatic hyphenation */
    /* Ensure normal white-space for proper text flow (not flex or per-letter layout) */
    white-space: normal; /* Normal wrapping behavior */
    /* Typography refinement: balanced spacing for justified text */
    word-spacing: 0.12em; /* Clear word separation, tighter than default justify gaps */
    letter-spacing: 0.03em; /* Subtle letter spacing for even distribution */
    /* No transforms or offsets that would shift lines */
    transform: none;
    /* Ensure no left indent */
    text-indent: 0;
}

/* Letter slot container - natural size, no clipping in default state */
.canvas-text-box-letter-sound .letter-slot {
    display: inline; /* Inline to maintain natural text flow for justification */
    position: relative; /* Allow absolute positioning of children */
    width: auto; /* Natural width - matches glyph size */
    height: auto; /* Natural height - matches glyph size */
    overflow: visible; /* No clipping - letters render normally */
    vertical-align: baseline; /* Align with text baseline */
    cursor: pointer;
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    z-index: 1;
}

/* Static glyph - visible normally for layout, hidden on hover */
.canvas-text-box-letter-sound .letter-slot .letter-glyph-static {
    display: inline; /* Inline to maintain natural text flow */
    position: relative;
    /* Inherit font properties from parent paragraph */
    font-size: inherit;
    line-height: inherit;
    letter-spacing: inherit;
    word-spacing: inherit;
    color: inherit;
    pointer-events: none;
    /* Hover-out: delay before reappearing to allow letter to slide up and push shape out */
    /* No opacity transition - visibility controlled by position/masking only */
    transition: visibility 0s linear 0.315s; /* 0.315s delay (0.105s pause + 0.3s letter slide up, reduced by 30%), then instant show */
    visibility: visible;
}

/* Letter mask - 45×45px clipping area centered on letter */
/* Contains both the sliding letter glyph and the shape */
.canvas-text-box-letter-sound .letter-slot .letter-mask {
    position: absolute;
    left: 50%;
    top: 50%;
    width: 45px;
    height: 45px;
    transform: translate(-50%, -50%);
    overflow: hidden; /* Clip both letter and shape as they transition */
    pointer-events: none; /* Don't interfere with hover */
    z-index: 1;
    opacity: 0; /* Hidden by default */
    /* Hover-out: mask stays visible during animation, then hides instantly (no fade) */
    /* Delay matches hover-out animation timing (0.105s delay + 0.3s animation = 0.315s, reduced by 30%) */
    transition: opacity 0s linear 0.315s; /* Instant hide after 0.315s delay - no fade, just timing */
    /* Ensure mask fully clips content - no overflow visible */
    clip-path: inset(0);
}

/* Letter glyph - the sliding version inside mask, hidden by default */
.canvas-text-box-letter-sound .letter-slot .letter-glyph {
    display: flex;
    position: absolute;
    left: 50%;
    top: 50%;
    /* Start at center position */
    transform: translate(-50%, -50%) translateY(0);
    /* Hover-out: letter slides UP from below (70px → 0) - translate only, no opacity */
    transition: transform 0.3s ease-in 0.105s; /* 0.105s delay (reduced by 30%), then 0.3s slide up - translate only */
    /* Inherit font properties from parent paragraph */
    font-size: inherit;
    line-height: inherit;
    letter-spacing: inherit;
    word-spacing: inherit;
    /* Center text both horizontally and vertically */
    align-items: center;
    justify-content: center;
    color: inherit;
    pointer-events: none;
    white-space: nowrap;
    /* Visibility controlled by mask and position only - always fully opaque when visible */
    opacity: 1; /* Always fully opaque when mask is visible */
    z-index: 1; /* Below shape */
}

/* Hover-out: letter slides up - translate only, no opacity */
.canvas-text-box-letter-sound .letter-slot.hover-leaving .letter-glyph {
    /* Letter slides from 70px (down) to 0 (center) - translate only */
    transform: translate(-50%, -50%) translateY(0);
    transition: transform 0.3s ease-in 0.105s; /* Translate only, no opacity (reduced delay by 30%) */
}

/* SVG shape container - positioned inside mask, slides up from below */
.canvas-text-box-letter-sound .letter-slot .letter-shape {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 45px;
    height: 45px;
    /* Start from below (translateY(70px)) - matches letter slide distance for synchronized motion */
    transform: translate(-50%, -50%) translateY(70px);
    /* Hover-out: shape is pushed UP and out by letter sliding up - translate only, no opacity */
    transition: transform 0.3s ease-in 0.105s; /* 0.105s delay (shape pause, reduced by 30%), then 0.3s ease-in push up - translate only */
    /* Visibility controlled by mask and position only - always fully opaque when visible */
    opacity: 1; /* Always fully opaque when mask is visible */
    /* Shape appears above glyph to cover it */
    z-index: 2;
    pointer-events: none;
}

/* Hover-out state: shape is pushed up and out by letter sliding up */
.canvas-text-box-letter-sound .letter-slot.hover-leaving .letter-shape {
    /* Shape is pushed UP and out by letter sliding up - translate only */
    transform: translate(-50%, -50%) translateY(-70px);
    transition: transform 0.3s ease-in 0.105s; /* Translate only, no opacity (reduced delay by 30%) */
}

/* Letter slot hover state - letter slides down, shape slides up */
.canvas-text-box-letter-sound .letter-slot:hover,
.canvas-text-box-letter-sound .letter-slot.hover-active {
    /* Increase z-index so hovered letter's shape appears on top of neighbors */
    z-index: 10;
}

/* Hide static glyph on hover - instant (no fade) */
.canvas-text-box-letter-sound .letter-slot:hover .letter-glyph-static,
.canvas-text-box-letter-sound .letter-slot.hover-active .letter-glyph-static {
    visibility: hidden; /* Instant hide - no opacity, visibility only */
    /* Hover-in: instant hide, no delay */
    transition: visibility 0s ease; /* Instant hide on hover */
}

/* Show mask on hover - becomes visible immediately */
.canvas-text-box-letter-sound .letter-slot:hover .letter-mask,
.canvas-text-box-letter-sound .letter-slot.hover-active .letter-mask {
    opacity: 1; /* Instant show - no transition */
    /* Hover-in: instant show, no transition */
    transition: none; /* No transitions - instant visibility */
}

/* Sliding glyph: visible as it slides down into mask, then gets clipped */
/* Slide down enough to fully exit the mask (70px ensures tall letters disappear completely) */
.canvas-text-box-letter-sound .letter-slot:hover .letter-glyph,
.canvas-text-box-letter-sound .letter-slot.hover-active .letter-glyph {
    /* Visible during slide-down animation - translate only, no opacity */
    transform: translate(-50%, -50%) translateY(70px); /* Slide down enough to fully disappear */
    /* Hover-in: no delay, immediate response - translate only */
    transition: transform 0.2s ease; /* Translate only, no opacity */
}

/* Shape slides up from below to center position on hover */
/* This creates the "push" effect - shape takes the letter's place */
.canvas-text-box-letter-sound .letter-slot:hover .letter-shape,
.canvas-text-box-letter-sound .letter-slot.hover-active .letter-shape {
    /* Visible as it slides up - translate only, no opacity */
    transform: translate(-50%, -50%) translateY(0); /* Slide up to center position */
    /* Hover-in: no delay, immediate response - translate only */
    transition: transform 0.2s ease; /* Translate only, no opacity */
    z-index: 2;
}

/* When hover-active class is present, override any hover-out delays to prevent blank states */
.canvas-text-box-letter-sound .letter-slot.hover-active .letter-glyph-static {
    /* Force immediate hide when hover-active class is set - visibility only */
    transition: visibility 0s ease !important;
}

.canvas-text-box-letter-sound .letter-slot.hover-active .letter-mask,
.canvas-text-box-letter-sound .letter-slot.hover-active .letter-glyph,
.canvas-text-box-letter-sound .letter-slot.hover-active .letter-shape {
    /* Force immediate show when hover-active class is set (cancel any pending hover-out) - translate only */
    transition: transform 0.2s ease !important; /* Translate only, no opacity */
}

/* Keep old letter-span styles for spaces (they won't be wrapped in slots) */
.canvas-text-box-letter-sound .letter-span {
    display: inline; /* Use inline to maintain natural text flow for justification */
    position: relative;
    width: auto;
    height: auto;
    overflow: visible;
    font-size: inherit;
    line-height: inherit;
    letter-spacing: inherit;
    word-spacing: inherit;
    text-align: inherit;
    vertical-align: baseline;
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    transform: none;
    z-index: 1;
}

/* Space character handling - no transformation */
.canvas-text-box-letter-sound .letter-span.space {
    display: inline;
    width: auto;
    height: auto;
    font-size: inherit;
    line-height: inherit;
    cursor: default;
    margin: 0;
    padding: 0;
    transform: none;
}

/* Space character: no shape */
.canvas-text-box-letter-sound .letter-span.space .letter-shape {
    display: none;
}

/* Change shape colors to match SHAPE & NUMBER canvas style */
.canvas-text-box-letter-sound svg,
.canvas-text-box-letter-sound .letter-shape svg,
.canvas-text-box-letter-sound .letter-slot svg {
    fill: #fff !important; /* White fill to match shape & number canvas */
    stroke: #2C2C2C !important; /* Same black as UI rectangles */
    stroke-width: 2px !important; /* 2px stroke width */
}

/* ==================
   LETTER + COLOR TEXT BOX
   ================== */
/* Canvas text box for LETTER & COLOR only */
.canvas-text-box-letter-color {
    position: absolute;
    /* 85px from the start of the canvas (85px below the bottom edge of gradient header) */
    top: 85px;
    /* 85px inward from the inner edge of left scrollbar (which is at 50px) */
    left: 85px;
    /* 85px inward from the inner edge of right scrollbar (which is at 50px from right) */
    right: 85px;
    /* Width is calculated automatically via left and right */
    font-family: Helvetica, sans-serif;
    font-size: 67px;
    line-height: 71px;
    font-weight: bold;
    color: #2C2C2C; /* Same black as UI rectangles */
    z-index: 11; /* Below main canvas text box (z-index: 12) but above canvas */
    pointer-events: auto; /* Enable hover interactions on letters */
    overflow: visible; /* Ensure text is visible */
    text-align: left; /* Left-aligned text */
    text-transform: uppercase; /* Convert text to uppercase */
    /* Ensure no padding or margin that would offset text from left edge */
    padding: 0;
    margin: 0;
    /* Hidden by default, shown only for LETTER & COLOR pages */
    display: none;
    visibility: hidden;
    opacity: 0;
    /* No transition - instant page switching */
    /* Ensure proper word wrapping - no word splitting */
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: none; /* No automatic hyphenation */
}

/* Show text box when LETTER & COLOR is active */
.canvas-text-box-letter-color.visible {
    display: block;
    visibility: visible;
    opacity: 1;
}

/* Paragraph styling for letter-color text box */
.canvas-text-box-letter-color p {
    display: block;
    width: 100%;
    margin: 0;
    padding: 0;
    text-align: left; /* Left-aligned text */
    /* Normal font size and line height for proper text flow */
    font-size: 67px; /* Match container font-size */
    line-height: 71px; /* Match container line-height */
    /* Ensure proper word wrapping - no word splitting */
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: none; /* No automatic hyphenation */
    /* Ensure normal white-space for proper text flow (not flex or per-letter layout) */
    white-space: normal; /* Normal wrapping behavior */
    /* Typography refinement: balanced spacing for justified text */
    word-spacing: 0.12em; /* Clear word separation, tighter than default justify gaps */
    letter-spacing: 0.03em; /* Subtle letter spacing for even distribution */
    /* No transforms or offsets that would shift lines */
    transform: none;
    /* Ensure no left indent */
    text-indent: 0;
}

/* Letter slot container - natural size, no clipping in default state */
.canvas-text-box-letter-color .letter-slot {
    display: inline; /* Inline to maintain natural text flow for justification */
    position: relative; /* Allow absolute positioning of children */
    width: auto; /* Natural width - matches glyph size */
    height: auto; /* Natural height - matches glyph size */
    overflow: visible; /* No clipping - letters render normally */
    vertical-align: baseline; /* Align with text baseline */
    cursor: pointer;
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    z-index: 1;
}

/* Static glyph - visible normally for layout, hidden on hover */
.canvas-text-box-letter-color .letter-slot .letter-glyph-static {
    display: inline; /* Inline to maintain natural text flow */
    position: relative;
    /* Inherit font properties from parent paragraph */
    font-size: inherit;
    line-height: inherit;
    letter-spacing: inherit;
    word-spacing: inherit;
    color: inherit;
    pointer-events: none;
    /* Hover-out: delay before reappearing to allow letter to slide up and push color out */
    /* No opacity transition - visibility controlled by position/masking only */
    transition: visibility 0s linear 0.315s; /* 0.315s delay, then instant show */
    visibility: visible;
}

/* Letter mask - 45×45px clipping area centered on letter */
/* Contains both the sliding letter glyph and the color square */
.canvas-text-box-letter-color .letter-slot .letter-mask {
    position: absolute;
    left: 50%;
    top: 50%;
    width: 45px;
    height: 45px;
    transform: translate(-50%, -50%);
    overflow: hidden; /* Clip both letter and color as they transition */
    pointer-events: none; /* Don't interfere with hover */
    z-index: 1;
    opacity: 0; /* Hidden by default */
    /* Hover-out: mask stays visible during animation, then hides instantly (no fade) */
    transition: opacity 0s linear 0.315s; /* Instant hide after 0.315s delay */
    /* Ensure mask fully clips content - no overflow visible */
    clip-path: inset(0);
}

/* Letter glyph - the sliding version inside mask, hidden by default */
.canvas-text-box-letter-color .letter-slot .letter-glyph {
    display: flex;
    position: absolute;
    left: 50%;
    top: 50%;
    /* Start at center position */
    transform: translate(-50%, -50%) translateY(0);
    /* Hover-out: letter slides UP from below (70px → 0) - translate only, no opacity */
    transition: transform 0.3s ease-in 0.105s; /* 0.105s delay, then 0.3s slide up */
    /* Inherit font properties from parent paragraph */
    font-size: inherit;
    line-height: inherit;
    letter-spacing: inherit;
    word-spacing: inherit;
    /* Center text both horizontally and vertically */
    align-items: center;
    justify-content: center;
    color: inherit;
    pointer-events: none;
    white-space: nowrap;
    /* Visibility controlled by mask and position only - always fully opaque when visible */
    opacity: 1; /* Always fully opaque when mask is visible */
    z-index: 1; /* Below color square */
}

/* Hover-out: letter slides up - translate only, no opacity */
.canvas-text-box-letter-color .letter-slot.hover-leaving .letter-glyph {
    /* Letter slides from 70px (down) to 0 (center) - translate only */
    transform: translate(-50%, -50%) translateY(0);
    transition: transform 0.3s ease-in 0.105s; /* Translate only, no opacity */
}

/* Colored letter - positioned inside mask, slides up from below */
.canvas-text-box-letter-color .letter-slot .letter-color {
    display: flex;
    position: absolute;
    left: 50%;
    top: 50%;
    /* Start from below (translateY(70px)) - matches letter slide distance for synchronized motion */
    transform: translate(-50%, -50%) translateY(70px);
    /* Hover-out: color is pushed UP and out by letter sliding up - translate only, no opacity */
    transition: transform 0.3s ease-in 0.105s; /* 0.105s delay, then 0.3s ease-in push up */
    /* Inherit font properties from parent paragraph */
    font-size: inherit;
    line-height: inherit;
    letter-spacing: inherit;
    word-spacing: inherit;
    /* Center text both horizontally and vertically */
    align-items: center;
    justify-content: center;
    /* Color is set via JS style.color */
    pointer-events: none;
    white-space: nowrap;
    /* Visibility controlled by mask and position only - always fully opaque when visible */
    opacity: 1; /* Always fully opaque when mask is visible */
    /* Colored letter appears above glyph to cover it */
    z-index: 2;
}

/* Hover-out state: colored letter is pushed up and out by black letter sliding up */
.canvas-text-box-letter-color .letter-slot.hover-leaving .letter-color {
    /* Colored letter is pushed UP and out by black letter sliding up - translate only */
    transform: translate(-50%, -50%) translateY(-70px);
    transition: transform 0.3s ease-in 0.105s; /* Translate only, no opacity */
}

/* Letter slot hover state - black letter slides down, colored letter slides up */
.canvas-text-box-letter-color .letter-slot:hover,
.canvas-text-box-letter-color .letter-slot.hover-active {
    /* Increase z-index so hovered colored letter appears on top of neighbors */
    z-index: 10;
}

/* Hide static glyph on hover - instant (no fade) */
.canvas-text-box-letter-color .letter-slot:hover .letter-glyph-static,
.canvas-text-box-letter-color .letter-slot.hover-active .letter-glyph-static {
    visibility: hidden; /* Instant hide - no opacity, visibility only */
    /* Hover-in: instant hide, no delay */
    transition: visibility 0s ease; /* Instant hide on hover */
}

/* Show mask on hover - becomes visible immediately */
.canvas-text-box-letter-color .letter-slot:hover .letter-mask,
.canvas-text-box-letter-color .letter-slot.hover-active .letter-mask {
    opacity: 1; /* Instant show - no transition */
    /* Hover-in: instant show, no transition */
    transition: none; /* No transitions - instant visibility */
}

/* Sliding glyph: visible as it slides down into mask, then gets clipped */
/* Slide down enough to fully exit the mask (70px ensures tall letters disappear completely) */
.canvas-text-box-letter-color .letter-slot:hover .letter-glyph,
.canvas-text-box-letter-color .letter-slot.hover-active .letter-glyph {
    /* Visible during slide-down animation - translate only, no opacity */
    transform: translate(-50%, -50%) translateY(70px); /* Slide down enough to fully disappear */
    /* Hover-in: no delay, immediate response - translate only */
    transition: transform 0.2s ease; /* Translate only, no opacity */
}

/* Colored letter slides up from below to center position on hover */
/* This creates the "push" effect - colored letter takes the black letter's place */
.canvas-text-box-letter-color .letter-slot:hover .letter-color,
.canvas-text-box-letter-color .letter-slot.hover-active .letter-color {
    /* Visible as it slides up - translate only, no opacity */
    transform: translate(-50%, -50%) translateY(0); /* Slide up to center position */
    /* Hover-in: no delay, immediate response - translate only */
    transition: transform 0.2s ease; /* Translate only, no opacity */
    z-index: 2;
}

/* When hover-active class is present, override any hover-out delays to prevent blank states */
.canvas-text-box-letter-color .letter-slot.hover-active .letter-glyph-static {
    /* Force immediate hide when hover-active class is set - visibility only */
    transition: visibility 0s ease !important;
}

.canvas-text-box-letter-color .letter-slot.hover-active .letter-mask,
.canvas-text-box-letter-color .letter-slot.hover-active .letter-glyph,
.canvas-text-box-letter-color .letter-slot.hover-active .letter-color {
    /* Force immediate show when hover-active class is set (cancel any pending hover-out) - translate only */
    transition: transform 0.2s ease !important; /* Translate only, no opacity */
}

/* Keep old letter-span styles for spaces (they won't be wrapped in slots) */
.canvas-text-box-letter-color .letter-span {
    display: inline; /* Use inline to maintain natural text flow for justification */
    position: relative;
    width: auto;
    height: auto;
    overflow: visible;
    font-size: inherit;
    line-height: inherit;
    letter-spacing: inherit;
    word-spacing: inherit;
    text-align: inherit;
    vertical-align: baseline;
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    transform: none;
    z-index: 1;
}

/* Space character handling - no transformation */
.canvas-text-box-letter-color .letter-span.space {
    display: inline;
    width: auto;
    height: auto;
    font-size: inherit;
    line-height: inherit;
    cursor: default;
    margin: 0;
    padding: 0;
    transform: none;
}

/* Space character: no colored letter */
.canvas-text-box-letter-color .letter-span.space .letter-color {
    display: none;
}

/* Canvas instruction text for SOUND & SHAPE page */
.canvas-instruction-text {
    position: absolute;
    /* Center horizontally and vertically in canvas container */
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-family: 'JetBrains Mono NL', monospace;
    font-size: 15px;
    color: #2C2C2C; /* Same black as UI rectangles */
    background-color: white; /* White background to match page background */
    padding: 8px 16px; /* Add padding around text for better visibility */
    z-index: 13; /* Above canvas (z-index: 11) to ensure text appears on top of drawings */
    pointer-events: none; /* Don't interfere with canvas interactions */
    white-space: nowrap;
    /* Hidden by default, shown only for SOUND & SHAPE pages */
    display: none;
    visibility: hidden;
    opacity: 0;
    /* No transition - instant page switching */
}

/* Show instruction text when SOUND & SHAPE is active */
.canvas-instruction-text.visible {
    display: block;
    visibility: visible;
    opacity: 1;
}

.line-horizontal {
    width: 100vw;
    height: 1px;
    left: 0;
    top: 50px;
    z-index: 1;
    display: none; /* Hide grid lines */
}

.container {
    text-align: center;
    position: relative;
    z-index: 1;
    pointer-events: none; /* Prevent interaction with center content */
}

h1 {
    font-size: 3rem;
    font-weight: normal;
}


/* Container for concentric rings with letter A on Letter + Letter page */
.letter-letter-circle-container {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, calc(-50% - 50px)); /* Centered with slight upward offset */
    width: 620px;
    height: 620px;
    pointer-events: auto; /* Enable interactions with rings */
    z-index: 13; /* Above canvas but below buttons */
    display: none;
    visibility: hidden;
    opacity: 0;
    /* No transition - instant page switching */
}

.letter-letter-circle-container.visible {
    display: block;
    visibility: visible;
    opacity: 1;
}

/* SVG container for concentric rings */
.concentric-rings-svg {
    width: 100%;
    height: 100%;
    overflow: visible;
}

/* Ring group - contains circle and letter slice */
.ring-group {
    cursor: default;
    pointer-events: none; /* No interaction needed - rings follow mouse automatically */
}

/* Ring circle styling */
.ring-circle {
    fill: white;
    stroke: #2C2C2C;
    stroke-width: 2px;
    pointer-events: all; /* Allow clicking on the entire circle area */
}

/* Ring letter - the sliced portion of A or 5 */
.ring-letter {
    pointer-events: none; /* Don't interfere with ring dragging */
    user-select: none;
}

/* Container for concentric rings with digit 5 on Number + Number page */
.number-number-circle-container {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, calc(-50% - 50px)); /* Centered with slight upward offset */
    width: 620px;
    height: 620px;
    pointer-events: auto; /* Enable interactions with rings */
    z-index: 13; /* Above canvas but below buttons */
    display: none;
    visibility: hidden;
    opacity: 0;
    /* No transition - instant page switching */
}

.number-number-circle-container.visible {
    display: block;
    visibility: visible;
    opacity: 1;
}

/* Container for white circle with black outline on Shape + Color page */
.shape-color-circle-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none; /* Don't interfere with canvas interactions */
    z-index: 1; /* Below UI elements (z-index: 2+), columns (z-index: 10+), and text boxes (z-index: 12+), but above canvas */
    display: none;
    visibility: hidden;
    opacity: 0;
    /* No transition - instant page switching */
}

.shape-color-circle-container.visible {
    display: block;
    visibility: visible;
    opacity: 1;
}

/* SVG container for lines on Shape + Color page */
.shape-color-lines-svg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1; /* Below circles (which are at z-index: 2) */
}

/* Circle with blue gradient (deep blue to cyan) on Shape + Color page */
.shape-color-circle {
    position: absolute;
    width: 135px;
    height: 135px;
    border-radius: 50%;
    background: #ffffff; /* White fill by default */
    border: 3px solid #2C2C2C; /* 3px black outline */
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    pointer-events: auto; /* Enable hover interactions */
    z-index: 2; /* Above lines (which are at z-index: 1) */
    transition: none; /* Transition controlled by JavaScript */
}


/* Orange square with black outline on Shape + Color page */
.shape-color-square {
    position: absolute;
    width: 135px;
    height: 135px;
    background-color: #ffffff; /* White fill by default */
    border: 3px solid #2C2C2C; /* 3px black outline */
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    pointer-events: auto; /* Enable hover interactions */
    z-index: 2; /* Above lines (which are at z-index: 1) */
    transition: none; /* Transition controlled by JavaScript */
}


/* Ellipse with purple-pink gradient on Shape + Color page */
.shape-color-ellipse {
    position: absolute;
    width: 108px; /* Reduced by 20% from 135px (135 * 0.8 = 108) */
    height: 72px; /* Reduced by 20% from 90px (90 * 0.8 = 72) */
    border-radius: 50%;
    background: #ffffff; /* White fill by default */
    border: 3px solid #2C2C2C; /* 3px black outline */
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    pointer-events: auto; /* Enable hover interactions */
    z-index: 2; /* Above lines (which are at z-index: 1) */
    transition: none; /* Transition controlled by JavaScript */
}


/* White triangle with black outline on Shape + Color page */
.shape-color-triangle {
    position: absolute;
    width: 67.5px; /* Reduced by 50% from 135px (135 * 0.5 = 67.5) */
    height: 67.5px; /* Reduced by 50% from 135px (135 * 0.5 = 67.5) */
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    pointer-events: auto; /* Enable hover interactions */
    z-index: 2; /* Above lines (which are at z-index: 1) */
    cursor: pointer; /* Indicate interactivity */
    overflow: visible !important; /* Allow stroke to extend beyond container */
}

/* Default white fill for all SVG shapes */
.shape-color-triangle svg,
.shape-color-pentagon svg,
.shape-color-star svg {
    overflow: visible !important; /* Allow stroke to extend beyond SVG viewport */
}

.shape-color-triangle svg path,
.shape-color-pentagon svg path,
.shape-color-star svg path {
    fill: #ffffff; /* White fill by default */
    stroke: #2C2C2C !important; /* Black stroke */
    transition: none; /* Transition controlled by JavaScript */
    /* Smooth line joins and caps for consistent outline at corners */
    stroke-linejoin: round !important; /* Round joins for smooth corners */
    stroke-linecap: round !important; /* Round caps for smooth line ends */
    stroke-miterlimit: 10 !important; /* High miter limit for round joins */
}

/* Ensure all SVG shapes have consistent 3px stroke */
.shape-color-triangle svg path {
    stroke-width: 6 !important; /* 3px on screen: 3 / (67.5/135) = 3 / 0.5 = 6 */
}

.shape-color-pentagon svg path {
    stroke-width: 3 !important; /* 3px on screen: 3 / (135/135) = 3 / 1 = 3 */
}

.shape-color-star svg path {
    stroke-width: 4.286 !important; /* 3px on screen: 3 / (94.5/135) = 3 / 0.7 = 4.286 */
}


/* White pentagon with black outline on Shape + Color page */
.shape-color-pentagon {
    position: absolute;
    width: 135px;
    height: 135px;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    pointer-events: auto; /* Enable hover interactions */
    z-index: 2; /* Above lines (which are at z-index: 1) */
    cursor: pointer; /* Indicate interactivity */
    overflow: visible !important; /* Allow stroke to extend beyond container */
}

/* Pentagon hover state - handled by JavaScript (gradient requires dynamic reference) */

/* White star with black outline on Shape + Color page */
.shape-color-star {
    position: absolute;
    width: 94.5px; /* Reduced by 30% from 135px (135 * 0.7 = 94.5) */
    height: 94.5px; /* Reduced by 30% from 135px (135 * 0.7 = 94.5) */
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    pointer-events: auto; /* Enable hover interactions */
    z-index: 2; /* Above lines (which are at z-index: 1) */
    cursor: pointer; /* Indicate interactivity */
    overflow: visible !important; /* Allow stroke to extend beyond container */
}

/* Star hover state - handled by JavaScript (gradient requires dynamic reference) */

/* ==================
   MELODY CIRCLE LETTERS (Sound + Letter page)
   ================== */
.melody-circle-container {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 700px; /* Circle diameter - increased for larger letters */
    height: 700px; /* Circle diameter - increased for larger letters */
    pointer-events: none; /* Don't interfere with canvas interactions */
    z-index: 13; /* Above canvas but below buttons */
    display: none;
    visibility: hidden;
    opacity: 0;
    /* No transition - instant page switching */
}

.melody-circle-container.visible {
    display: block;
    visibility: visible;
    opacity: 1;
}

/* SVG for lines from center to each letter */
.melody-lines-svg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1; /* Below letters */
    overflow: visible;
}

.melody-line {
    stroke: #2C2C2C;
    stroke-width: 2px;
    fill: none;
}

.melody-letter {
    position: absolute;
    font-family: Helvetica, sans-serif;
    font-size: 200px;
    font-weight: bold;
    color: #2C2C2C; /* Same black as UI */
    text-transform: uppercase;
    /* Positioned by JavaScript using left/top pixel values */
    z-index: 2; /* Above lines */
    pointer-events: auto; /* Enable dragging */
    cursor: grab;
    user-select: none; /* Prevent text selection while dragging */
}

.melody-letter:active {
    cursor: grabbing;
}

.melody-letter.dragging {
    cursor: grabbing;
}

/* Variable weight class for M letter - uses Helvetica Now Variable font */
.melody-letter.variable-weight {
    font-family: 'Helvetica Now Variable', Helvetica, sans-serif;
    font-weight: 400; /* Default, will be overridden by JS */
}

/* ==================
   SHAPE & NUMBER CANVAS
   ================== */
.shape-number-container {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    z-index: 10; /* Same as p5-container */
    /* No transition - instant page switching */
}

.shape-number-container.hidden {
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
}

.shape-number-container:not(.hidden) {
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
}

#shape-number-draw-surface {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    display: block;
    background: #fff;
    z-index: 11;
}

.shape-number-panel {
    position: absolute;
    right: 0px;
    bottom: 40px;
    width: 180px;
    min-width: 180px;
    max-width: 180px;
    box-sizing: border-box;
    background: #2C2C2C;
    padding: 10px;
    z-index: 12; /* Above canvas */
    overflow-y: auto;
    overflow-x: hidden;
    /* Slide-in animation: starts off-screen right */
    transform: translateX(100%);
    transition: transform 0.3s ease;
}

/* Visible state: panel slides into position */
.shape-number-panel.visible {
    transform: translateX(0);
}

.shape-number-title {
    font-size: 15px;
    font-weight: normal;
    margin-bottom: 10px;
    font-family: 'JetBrains Mono NL', monospace;
    color: #ffffff;
    letter-spacing: 0.03em;
    line-height: 0.8;
}

.shape-number-label {
    font-size: 15px;
    margin: 4px 0;
    font-family: 'JetBrains Mono NL', monospace;
    color: #ffffff;
    letter-spacing: 0.03em;
    line-height: 0.8;
}

.shape-number-value {
    font-size: 15px;
    margin-top: 4px;
    color: #ffffff;
    font-family: 'JetBrains Mono NL', monospace;
    letter-spacing: 0.03em;
    line-height: 0.8;
}

.shape-number-spacer {
    height: 10px;
}

#shape-number-countSlider,
#shape-number-sizeSlider {
    width: 100%;
    box-sizing: border-box;
    font-family: 'JetBrains Mono NL', monospace;
    font-size: 15px;
    color: #ffffff;
    letter-spacing: 0.03em;
    line-height: 0.8;
    background-color: transparent;
    border: none;
}

/* Shape buttons container */
.shape-number-shapes-container {
    display: flex;
    flex-direction: column;
    gap: 6px;
    align-items: flex-start;
}

.shape-number-shapes-row {
    display: flex;
    flex-direction: row;
    gap: 6px;
    align-items: center;
    width: 100%;
}

.shape-number-shape-btn {
    flex: 1;
    margin: 0;
    font-size: 20px;
    font-family: 'JetBrains Mono NL', monospace;
    letter-spacing: 0.03em;
    line-height: 0.8;
    text-transform: none;
    border-radius: 0;
    border: none;
    background: transparent;
    color: #ffffff;
    cursor: pointer;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 4px 0;
}

/* Style for range sliders */
#shape-number-countSlider,
#shape-number-sizeSlider {
    -webkit-appearance: none;
    appearance: none;
    height: 2px;
    background: #ffffff;
    outline: none;
}

#shape-number-countSlider::-webkit-slider-thumb,
#shape-number-sizeSlider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 12px;
    height: 12px;
    background: #ffffff;
    cursor: pointer;
    border-radius: 0;
}

#shape-number-countSlider::-moz-range-thumb,
#shape-number-sizeSlider::-moz-range-thumb {
    width: 12px;
    height: 12px;
    background: #ffffff;
    cursor: pointer;
    border: none;
    border-radius: 0;
}

/* ==================
   SHAPE & EMOTION CANVAS
   ================== */
.shape-emotion-container {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    z-index: 10; /* Same as p5-container */
    /* No transition - instant page switching */
}

.shape-emotion-container.hidden {
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
}

.shape-emotion-container:not(.hidden) {
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
}

#shape-emotion-draw-surface {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    display: block;
    background: #fff;
    z-index: 11;
    cursor: crosshair; /* Indicate drawing capability */
}

/* ==================
   SOUND + COLOR SQUARES (6 colored squares in a circle at canvas edges)
   ================== */
.sound-color-squares-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none; /* Container doesn't block interactions */
    z-index: 13; /* Above canvas but below buttons */
    display: none;
    visibility: hidden;
    opacity: 0;
    /* No transition - instant page switching */
}

.sound-color-squares-container.visible {
    display: block;
    visibility: visible;
    opacity: 1;
}

/* Individual colored square - 100px × 100px */
.sound-color-square {
    position: absolute;
    width: 100px;
    height: 100px;
    pointer-events: auto; /* Enable drag interactions */
    cursor: grab;
    transition: box-shadow 0.2s ease;
    z-index: 2; /* Above lines (z-index: 1) */
    mix-blend-mode: multiply; /* Colors blend/darken where squares overlap */
    /* Position will be set by JavaScript */
}

.sound-color-square:active,
.sound-color-square.dragging {
    cursor: grabbing;
}

/* Hover effect for squares */
.sound-color-square:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

/* Wrapper that isolates blend mode to only affect squares, not lines */
.sound-color-squares-wrapper {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    isolation: isolate; /* Blend mode only applies within this container */
    pointer-events: none; /* Let events pass through to squares */
}

/* SVG container for lines from center to each square */
.sound-color-lines-svg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1; /* Below squares (which don't have explicit z-index, so they're higher) */
    overflow: visible;
}

/* Line styling - same black as the site (#2C2C2C) */
.sound-color-line {
    stroke: #2C2C2C;
    stroke-width: 2px;
    fill: none;
}

/* ==================
   SOUND + SOUND WAVE VISUALIZATION
   ================== */
.sound-sound-wave-container {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, calc(-50% - 80px)); /* Centered with upward offset like other elements */
    display: none;
    visibility: hidden;
    opacity: 0;
    pointer-events: none;
    z-index: 13; /* Above canvas but below buttons */
    /* Container centers the SVG and button */
    flex-direction: column;
    align-items: center;
    gap: 20px;
}

.sound-sound-wave-container.visible {
    display: flex;
    visibility: visible;
    opacity: 1;
    pointer-events: auto;
}

/* SVG container for the wave */
.sound-wave-svg {
    overflow: visible;
}

/* Wave path styling - 3px stroke width as requested */
.sound-wave-path {
    stroke: #2C2C2C;
    stroke-width: 3px;
    fill: none;
    stroke-linecap: round;
    stroke-linejoin: round;
}

/* Microphone enable button */
.sound-wave-mic-btn {
    font-family: 'JetBrains Mono NL', monospace;
    font-size: 15px;
    font-weight: normal;
    letter-spacing: 0.03em;
    color: #2C2C2C;
    background: transparent;
    border: none;
    padding: 8px 0;
    cursor: pointer;
    transition: opacity 0.2s ease;
}

.sound-wave-mic-btn:hover {
    opacity: 0.6;
}

.sound-wave-mic-btn.active {
    color: #2C2C2C;
    background: transparent;
}

.sound-wave-mic-btn.hidden {
    display: none;
}

/* ==================
   LETTER + NUMBER CIRCLE (A-Z followed by 1-9 arranged in a circle)
   ================== */
.letter-number-circle-container {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, calc(-50% - 80px)); /* Moved up by 80px */
    width: 700px;
    height: 700px;
    /* Hidden by default - shown only on Letter + Number pages (2-3, 3-2) */
    display: none;
    visibility: hidden;
    opacity: 0;
    pointer-events: none;
    /* No transition - instant page switching */
}

.letter-number-circle-container.visible {
    display: block;
    visibility: visible;
    opacity: 1;
    pointer-events: auto;
}

/* SVG container for lines from center to each letter/number */
.letter-number-lines-svg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1; /* Below letters/numbers */
    overflow: visible;
}

/* Line styling - same black as the site (#2C2C2C) */
.letter-number-line {
    stroke: #2C2C2C;
    stroke-width: 2px;
    fill: none;
}

/* Individual letter/number item */
.letter-number-item {
    position: absolute;
    font-family: Helvetica, sans-serif;
    font-size: 48px; /* 2x larger (was 24px) */
    font-weight: bold;
    color: #2C2C2C;
    text-transform: uppercase;
    /* Centered on its position */
    display: flex;
    align-items: center;
    justify-content: center;
    width: 80px; /* 2x larger (was 40px) */
    height: 80px; /* 2x larger (was 40px) */
    /* Position will be set by JavaScript */
    user-select: none;
    pointer-events: auto;
    z-index: 2; /* Above lines */
    /* Smooth transition for font-size changes based on distance from center */
    transition: font-size 0.1s ease-out;
}

/* ==================
   COLOR + COLOR CONCENTRIC RINGS
   ================== */
.color-color-circle-container {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, calc(-50% - 90px)); /* Centered with upward offset */
    width: 620px;
    height: 620px;
    pointer-events: auto; /* Enable interactions with rings */
    z-index: 13; /* Above canvas but below buttons */
    display: none;
    visibility: hidden;
    opacity: 0;
    /* No transition - instant page switching */
}

.color-color-circle-container.visible {
    display: block;
    visibility: visible;
    opacity: 1;
}

/* Individual gradient ring */
.color-color-ring {
    position: absolute;
    border-radius: 50%;
    /* Smooth conic gradient with 6 colors from scrollbar rectangles - colors blend into each other */
    background: conic-gradient(
        from 0deg,
        #EF4538 0deg,
        #891951 60deg,
        #FAB01B 120deg,
        #007A6F 180deg,
        #EB4781 240deg,
        #293990 300deg,
        #EF4538 360deg
    );
    border: 2px solid #2C2C2C;
    /* Centered in container */
    top: 50%;
    left: 50%;
    transform-origin: center center;
    pointer-events: none; /* Don't interfere with other rings */
}

/* Ring sizes: 600px, 480px, 360px, 240px, 120px (decreasing by 120px each) */
.color-color-ring[data-ring="0"] {
    width: 600px;
    height: 600px;
    margin-top: -300px;
    margin-left: -300px;
}

.color-color-ring[data-ring="1"] {
    width: 480px;
    height: 480px;
    margin-top: -240px;
    margin-left: -240px;
}

.color-color-ring[data-ring="2"] {
    width: 360px;
    height: 360px;
    margin-top: -180px;
    margin-left: -180px;
}

.color-color-ring[data-ring="3"] {
    width: 240px;
    height: 240px;
    margin-top: -120px;
    margin-left: -120px;
}

.color-color-ring[data-ring="4"] {
    width: 120px;
    height: 120px;
    margin-top: -60px;
    margin-left: -60px;
}

